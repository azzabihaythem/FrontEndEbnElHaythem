<tc-card class="mb-0">
  <!-- <div *ngFor="let patient of patient " class=""> -->
    <tc-table [rows]="patients" [hovered]="true" [pagination]="true" [headerBgColor]="'#336cfb'" [headerColor]="'#fff'">
    <tc-table-col [columnTitle]="'Photo'" [columnName]="'img'" >
      <ng-template #tableTDTemplate let-value >
        <div *ngFor="let patient of patient " class="table-cell2">
        <tc-avatar [src]="value" ></tc-avatar>
      </div>
      </ng-template>
    </tc-table-col>

    <tc-table-col [columnTitle]="'Login'" [columnName]="'login'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value>
        <div *ngFor="let patient of patient " class="table-cell"> 
        <strong class="">{{ patient.affile}}</strong>
      </div>
      </ng-template>
    </tc-table-col>
    
    <tc-table-col [columnTitle]="'FirstName'" [columnName]="'firstName'" [enableSorting]="true" >
      <ng-template #tableTDTemplate let-value>
        <div *ngFor="let patient of patient " class="table-cell">
        <strong>{{ patient.user.firstName}}</strong>
        </div>
      </ng-template>
    </tc-table-col>
    <tc-table-col [columnTitle]="'LastName'" [columnName]="'lastName'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value>
        <div *ngFor="let patient of patient " class="table-cell">
        <strong>{{ patient.user.lastName}}</strong>
      </div>
      </ng-template>
    </tc-table-col>

    <tc-table-col [columnTitle]="'Affiliation'" [columnName]="'affile'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value>
        <div *ngFor="let patient of patient " class="table-cell">
        <strong >{{ patient.affile}}</strong>
      </div>
      </ng-template>
    </tc-table-col>

    <tc-table-col [columnTitle]="'NumAffiliation'" [columnName]="'numAffiliation'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value>
        <div *ngFor="let patient of patient " class="table-cell">
        <strong>{{ patient.numAffiliation }}</strong>
      </div>
      </ng-template>
    </tc-table-col>

    <!-- <tc-table-col [columnTitle]="'ID'" [columnName]="'ID'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value>
        <div *ngFor="let patient of patient " class="">
        <strong>{{ patient.id }}</strong>
      </div>
      </ng-template>
    </tc-table-col> -->

    <tc-table-col [columnTitle]="'SeanceDays'" [columnName]="'seanceDays'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value>
        <div *ngFor="let patient of patient " class="table-cell">
        <strong>{{ patient.seanceDays}}</strong>
      </div>
      </ng-template>

    </tc-table-col>
    <tc-table-col [columnTitle]="'Actions'" [columnName]="'action'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value let-row="row">
        <div *ngFor="let patient of patient " class="table-cell">
          <div class="actions" class="tc-btn">
        
             <button
            tc-button 
            [afterIcon]="'icofont-external-link'"
            [square]="true"
            [tcShape]="500"
            [size]="'sm'"
            (click)="goToPatientProfile(patient.id)"
          ></button> 

          <button
            tc-button
            [afterIcon]="'icofont-ui-edit'"
            [view]="'info'"
            [square]="true"
            [tcShape]="500"
            [size]="'sm'"
            (click)="setPidToLocal(patient.id);openModal(modalBody, 'Update patient info', modalFooter, patient)"
          ></button>

          <button
            tc-button
            [afterIcon]="'icofont-ui-delete'"
            [view]="'error'"
            [square]="true"
            [tcShape]="500"
            [size]="'sm'"
            (click)="remove(patient.id)"
          ></button>
         </div>
        </div>
    
      </ng-template>
    </tc-table-col>

    <!-- <tc-table-col [columnTitle]="'PriseEnCharges'" [columnName]="'PriseEnCharges'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value let-row="row">
        <div *ngFor="let patient of patient " class="">
          <button
            tc-button
            [afterIcon]="'icofont-ui-edit'"
            [view]="'info'"
            [square]="true"
            [tcShape]="500"
            [size]="'sm'"
            (click)="openModal(modalBody, 'Update patient info', modalFooter, row)"
          ></button>
        <strong>{{ patient.priseEnCharges}}</strong> 
      </div>
      </ng-template>
    </tc-table-col> -->
   
    
    <!--
    <tc-table-col [columnTitle]="'ID'" [columnName]="'id'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value>
        <span [tcColor]="'#a5a5a5'" #id>{{ value }}</span>
      </ng-template>
    </tc-table-col>
    <tc-table-col [columnTitle]="'Age'" [columnName]="'age'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value>
        <span [tcColor]="'#a5a5a5'">{{ value }}</span>
      </ng-template>
    </tc-table-col>
    
    <tc-table-col [columnTitle]="'Address'" [columnName]="'address'">
      <ng-template #tableTDTemplate let-value>
        <div class="address-col">{{ value }}</div>
      </ng-template>
    </tc-table-col>
    <tc-table-col [columnTitle]="'Number'" [columnName]="'number'">
      <ng-template #tableTDTemplate let-value>
      <span class="d-flex align-items-center nowrap" [tcColor]="'#336cfb'">
        <tc-icon [iconClass]="'icofont-ui-cell-phone'" [tcFontSize]="16" [padding]="0" class="me-1"></tc-icon>
        {{ value }}
      </span>
      </ng-template>
    </tc-table-col>
    <tc-table-col [columnTitle]="'Last visit'" [columnName]="'lastVisit'">
      <ng-template #tableTDTemplate let-value>
        <span class="nowrap" [tcColor]="'#a5a5a5'">{{ value }}</span>
      </ng-template>
    </tc-table-col> 
    <tc-table-col [columnTitle]="'Status'" [columnName]="'status'" [enableSorting]="true">
      <ng-template #tableTDTemplate let-value>
        <tc-badge [view]="value === 'Approved' ? 'success' : 'warning'">{{ value }}</tc-badge>
      </ng-template>
    </tc-table-col>
    -->
    <!-- <tc-table-col [columnTitle]="'Actions'" [columnName]="'actions'">
      <ng-template #tableTDTemplate let-row="row">
        <div *ngFor="let patient of patient " class="tc-btn">
           <div class="actions" class="tc-btn">
        
             <button
            tc-button 
            [afterIcon]="'icofont-external-link'"
            [square]="true"
            [tcShape]="500"
            [size]="'sm'"
            (click)="goToPatientProfile(patient.id)"
          ></button> 
        

          <button
            tc-button
            [afterIcon]="'icofont-ui-edit'"
            [view]="'info'"
            [square]="true"
            [tcShape]="500"
            [size]="'sm'"
            (click)="setPidToLocal(patient.id);openModal(modalBody, 'Update patient info', modalFooter, patient)"
          ></button>

          <button
            tc-button
            [afterIcon]="'icofont-ui-delete'"
            [view]="'error'"
            [square]="true"
            [tcShape]="500"
            [size]="'sm'"
            (click)="remove(row.id)"
          ></button>
        </div>
      </div>
      </ng-template>
    </tc-table-col> -->

   </tc-table>
   
  <!-- </div> -->
</tc-card> 


<!-- edit patient Modal window -->
<ng-container>
  <ng-template #modalBody>
    <form [formGroup]="patientForm" novalidate class="new-patient-form">
      <tc-form-group class="avatar-box d-flex">
        <input type="file" accept="image/*" (change)="onFileChanged($event)" #fileInput hidden>

        <tc-avatar [src]="currentAvatar"></tc-avatar>
        <button
          tc-button
          [type]="'button'"
          [afterIcon]="'icofont-ui-user'"
          [view]="'accent'"
          [outline]="true"
          (click)="fileInput.click()"
        >
          Select image
        </button>
      </tc-form-group>
      
      <tc-form-group [formGroup]="patientForm">

        <div class="separator">
          <label for="affile">Patient information 1:</label>
                  <hr style="height: 0px; margin: 15px 0; background-color: black;">
       </div>
        <tc-input [placeholder]="'affile'" formControlName="affile"></tc-input>
      </tc-form-group>
     
      <tc-form-group [formGroup]="patientForm" >
        <tc-input [placeholder]="'desactivationDate'" type="date" formControlName="desactivationDate"></tc-input>
      </tc-form-group>

      <tc-form-group [formGroup]="patientForm">
        <tc-input [placeholder]="'doit'" formControlName="doit"></tc-input>
      </tc-form-group>

      <tc-form-group [formGroup]="patientForm">
        <tc-input [placeholder]="'numAffiliation'" formControlName="numAffiliation"></tc-input>
      </tc-form-group>

      <div class="col-12 col-sm-6">
        <tc-form-group [formGroup]="patientForm">
          <tc-select [placeholder]="'Seance Days'"  [options]="daysOfWeek" [multiple]="true" formControlName="seanceDays"></tc-select>
        </tc-form-group>
      </div>

      <div class="separator">
        <label for="affile">Prise En charges :</label>
                <hr style="height: 0px; margin: 15px 0; background-color: black;">
     </div>

      <tc-form-group [formGroup]="patientForm">
        <tc-input [placeholder]="'number'" formControlName="number"></tc-input>
      </tc-form-group>

      <tc-form-group [formGroup]="patientForm">
        <label for="affile">Start Date :</label>
        <tc-input [placeholder]="'startDate'" type="Date" formControlName="startDate"></tc-input>
      </tc-form-group>

      <tc-form-group [formGroup]="patientForm">
        <label for="affile">End Date :</label>
        <tc-input [placeholder]="'enDate'" type="Date" formControlName="endDate"></tc-input>
      </tc-form-group>

      <div class="separator">
        <label for="affile">Patient information 2  :</label>
                <hr style="height: 0px; margin: 15px 0; background-color: black;">
     </div>
      <tc-form-group [formGroup]="patientForm">
        <tc-input [placeholder]="'FirstName'" formControlName="firstName"></tc-input>
      </tc-form-group>

      <tc-form-group [formGroup]="patientForm">
        <tc-input [placeholder]="'lasttName'" formControlName="lastName"></tc-input>
      </tc-form-group>

      <tc-form-group [formGroup]="patientForm">
        <tc-input [placeholder]="'Login'" formControlName="login"></tc-input>
      </tc-form-group>

      <tc-form-group [formGroup]="patientForm">
        <tc-input [placeholder]="'BirthDate'" [type]="'date'"  formControlName="birthDate"></tc-input>
      </tc-form-group>

      <tc-form-group [formGroup]="patientForm">
        <tc-input [placeholder]="'Password'" formControlName="password"></tc-input>
      </tc-form-group>

      <!-- <tc-form-group>
        <tc-input [placeholder]="'Name'" formControlName="name"></tc-input>
      </tc-form-group>

      <tc-form-group>
        <tc-input [placeholder]="'Number'" [type]="'number'" formControlName="number"></tc-input>
      </tc-form-group>

      <div class="row">
        <div class="col-12 col-sm-6">
          <tc-form-group>
            <tc-input [placeholder]="'Age'" [type]="'number'" formControlName="age"></tc-input>
          </tc-form-group>
        </div>

        <div class="col-12 col-sm-6">
          <tc-form-group>
            <tc-select [placeholder]="'Gender'" formControlName="gender" [options]="gender"></tc-select>
          </tc-form-group>
        </div>
      </div>

      <tc-form-group>
        <tc-select [placeholder]="'Status'" formControlName="status" [options]="status"></tc-select>
      </tc-form-group>

      <tc-form-group class="mb-0">
        <tc-textarea [placeholder]="'Address'" formControlName="address"></tc-textarea>
      </tc-form-group> -->
   
    </form>
  </ng-template>

  <ng-template #modalFooter>
    <div class="actions justify-content-between">
      <button tc-button [type]="'button'" [view]="'error'" (click)="closeModal()">Cancel</button>
      <button tc-button [view]="'info'" [disabled]="patientForm.invalid" (click)="updatePatient(patientForm)">
        Update patient
      </button>
    </div>
  </ng-template>
</ng-container>
<!-- end Modal window -->
